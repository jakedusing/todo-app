<%- include("partials/header") %>
<main>
  <h1>Welcome to your Dashboard</h1>
  <h2>Todos:</h2>

  <!-- Display Existing Todos -->
  <ul>
    <% if (todos && todos.length > 0) { %> <% todos.forEach((todo) => { %>
    <li>
      <%= todo.title %> <% if (!todo.completed) { %>
      <form
        action="/todos/delete/<%= todo._id %>"
        method="POST"
        style="display: inline"
      >
        <button type="submit">Delete</button>
      </form>
      <% } %>
    </li>
    <% }); %> <% } else { %>
    <p>No todos yet. Add one below!</p>
    <% } %>
  </ul>

  <!-- Form to Add a New Todo -->
  <h3>Add a New Todo</h3>
  <form action="/todos/add" method="POST">
    <input type="text" name="title" placeholder="Enter todo" required />
    <button type="submit">Add</button>
  </form>

  <a href="/auth/logout">Logout</a>
</main>
<%- include("partials/footer"); %>
